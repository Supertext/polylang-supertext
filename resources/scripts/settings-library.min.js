/*!
 * Supertext translation
 * https://wordpress.org/plugins/polylang-supertext/
 * @author Heinrich Muralt
 * @version 2.7.0
 * Copyright 2022 */
var Supertext=Supertext||{};Supertext.Settings={},Supertext.Settings.Users=function(t){"use strict";var i,n;function r(){var e=n.clone();e.find(".remove-user-button").click(o),i.append(e)}function o(){t(this).parent("td").parent("tr").remove(),0===i.find("tr").length&&r()}return{initialize:function(e){(i=t("#tblStFields tbody")).find("tr .saved-user-id-hidden"),i.find("tr .remove-user-button").click(o),i.find("tr .saved-user-id-hidden").each(function(){var e=t(this);e.prev().val(e.val())}),(n=t("#tblStFields tr:last").clone()).find("input").val(""),t("#btnAddUser").click(r)}}}(jQuery),Supertext.Settings.TranslatableFields=function(n){"use strict";r={};var r,t={initialize:function(e){n("#translatablefieldsSettingsForm .field-remove-input").click(o),n("#translatablefieldsSettingsForm .field-add-input").click(i),n("#translatablefieldsSettingsForm .settings-input-list").each(function(e,t){var t=n(t),i=t.children(".settings-input-element").last().clone(),t=t.children(".field-add-input").first().data("input-name");r[t]=i})}};function i(){var e=n(this),t=r[e.data("input-name")].clone();t.children(".field-remove-input").click(o),t.children(".custom-field-remove-input").click(o),t.insertBefore(e).show()}function o(){n(this).parent().remove()}s={},a={};var s,a,c={initialize:function(e){for(var t in savedFieldDefinitionIds)savedFieldDefinitionIds.hasOwnProperty(t)&&(s[t]=n("#fieldDefinitionsTree"+t),a[t]=n("#checkedFieldsInput"+t),s[t].jstree({core:{themes:{name:"wordpress-dark"}},plugins:["checkbox"],checkbox:{keep_selected_style:!1}}),s[t].jstree("select_node",savedFieldDefinitionIds[t]));n("#translatablefieldsSettingsForm").submit(d)}};function d(){n.each(s,function(e,t){t=t.jstree("get_checked",!1);a[e].val(t.join(","))})}return{initialize:function(e){t.initialize(e=e||{}),c.initialize(e)}}}(jQuery),Supertext.Settings.Shortcodes=function(s){"use strict";var a,c;function o(e,t,i){var n=e.data("lastIndex"),r=void 0===n?0:n+1,n=a({shortcodeIndex:r,name:t,contentEncoding:i}),o=s(n);e.append(o),e.data("lastIndex",r),o.children(".shortcode-remove-setting").click(function(){o.remove()}),o.find(".shortcode-attribute-add-input").click(function(){d(o.find(".shortcode-setting-attributes"),r)}),l(o),o.find(".shortcode-input-name").bind("keydown",function(e){e.keyCode===s.ui.keyCode.TAB&&s(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(s.ui.autocomplete.filter(registeredShortcodes,e.term))}})}function d(e,t,i,n){var r=e.data("lastIndex"),r=void 0===r?0:r+1,o=s(c({shortcodeIndex:t,attributeIndex:r,name:i,encoding:n}));e.append(o),e.data("lastIndex",r),o.children(".shortcode-attribute-remove-input").click(function(){o.remove()}),l(o)}function n(e){return e.split(/,\s*/)}function l(e){e.find(".shortcode-input-encoding").bind("keydown",function(e){e.keyCode===s.ui.keyCode.TAB&&s(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(s.ui.autocomplete.filter(availableEncodingFunctions,n(e.term).pop()))},focus:function(){return!1},select:function(e,t){var i=n(this.value);return i.pop(),i.push(t.item.value),i.push(""),this.value=i.join(", "),!1}})}return{initialize:function(e){a=(e=e||{}).template("sttr-shortcode-setting"),c=e.template("sttr-shortcode-attribute");var r=s("#shortcode-settings");s.each(savedShortcodes,function(e,t){o(r,e,t.content_encoding);var i=r.find(".shortcode-setting-container:last .shortcode-setting-attributes"),n=r.data("lastIndex");s.each(t.attributes,function(e,t){d(i,n,t.name,t.encoding)})}),s("#shortcodesSettingsForm .shortcode-add-setting").click(function(){o(r)})}}}(jQuery),Supertext.Settings.Workflow=function(t){"use strict";var i,n;function r(){i.val(n.val()),n.children("option:last").is(":selected")?i.prop("readonly",!1):i.prop("readonly",!0)}return{initialize:function(e){i=t("#sttr-api-url"),(n=t("#sttr-api-selection")).change(r),r()}}}(jQuery),jQuery(document).ready(function(){var e=window.location.search,e=/tab=(.*?)(&|$|\s)/.exec(e);switch(null===e?"users":e[1]){case"users":Supertext.Settings.Users.initialize();break;case"translatablefields":Supertext.Settings.TranslatableFields.initialize();break;case"shortcodes":Supertext.Settings.Shortcodes.initialize({template:wp.template});break;case"workflow":Supertext.Settings.Workflow.initialize()}});