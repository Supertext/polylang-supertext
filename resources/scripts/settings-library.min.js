/*!
 * Supertext translation
 * https://wordpress.org/plugins/polylang-supertext/
 * @author Heinrich Muralt
 * @version 2.7.0
 * Copyright 2020 */
var Supertext=Supertext||{};Supertext.Settings={},Supertext.Settings.Users=function(t){"use strict";var i,n;function o(){var e=n.clone();e.find(".remove-user-button").click(r),i.append(e)}function r(){t(this).parent("td").parent("tr").remove(),0===i.find("tr").length&&o()}return{initialize:function(e){(i=t("#tblStFields tbody")).find("tr .saved-user-id-hidden"),i.find("tr .remove-user-button").click(r),i.find("tr .saved-user-id-hidden").each(function(){var e=t(this);e.prev().val(e.val())}),(n=t("#tblStFields tr:last").clone()).find("input").val(""),t("#btnAddUser").click(o)}}}(jQuery),Supertext.Settings.TranslatableFields=function(i){"use strict";var n,t={initialize:function(e){n=i("#translatablefieldsSettingsForm .custom-field-input").last().clone(),i("#translatablefieldsSettingsForm .custom-field-remove-input").click(r),i("#translatablefieldsSettingsForm .custom-field-add-input").click(o)}};function o(){var e=i(this),t=n.clone();t.children(".custom-field-remove-input").click(r),t.insertBefore(e).show()}function r(){i(this).parent().remove()}var s,a,c=(s={},a={},{initialize:function(e){for(var t in savedFieldDefinitionIds)savedFieldDefinitionIds.hasOwnProperty(t)&&(s[t]=i("#fieldDefinitionsTree"+t),a[t]=i("#checkedFieldsInput"+t),s[t].jstree({core:{themes:{name:"wordpress-dark"}},plugins:["checkbox"],checkbox:{keep_selected_style:!1}}),s[t].jstree("select_node",savedFieldDefinitionIds[t]));i("#translatablefieldsSettingsForm").submit(d)}});function d(){i.each(s,function(e,t){t=t.jstree("get_checked",!1);a[e].val(t.join(","))})}return{initialize:function(e){e=e||{},t.initialize(e),c.initialize(e)}}}(jQuery),Supertext.Settings.Shortcodes=function(s){"use strict";var a,c;function r(e,t,i){var n=e.data("lastIndex"),o=void 0===n?0:n+1,i=a({shortcodeIndex:o,name:t,contentEncoding:i}),r=s(i);e.append(r),e.data("lastIndex",o),r.children(".shortcode-remove-setting").click(function(){r.remove()}),r.find(".shortcode-attribute-add-input").click(function(){d(r.find(".shortcode-setting-attributes"),o)}),u(r),r.find(".shortcode-input-name").bind("keydown",function(e){e.keyCode===s.ui.keyCode.TAB&&s(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(s.ui.autocomplete.filter(registeredShortcodes,e.term))}})}function d(e,t,i,n){var o=e.data("lastIndex"),o=void 0===o?0:o+1,r=s(c({shortcodeIndex:t,attributeIndex:o,name:i,encoding:n}));e.append(r),e.data("lastIndex",o),r.children(".shortcode-attribute-remove-input").click(function(){r.remove()}),u(r)}function n(e){return e.split(/,\s*/)}function u(e){e.find(".shortcode-input-encoding").bind("keydown",function(e){e.keyCode===s.ui.keyCode.TAB&&s(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(s.ui.autocomplete.filter(availableEncodingFunctions,n(e.term).pop()))},focus:function(){return!1},select:function(e,t){var i=n(this.value);return i.pop(),i.push(t.item.value),i.push(""),this.value=i.join(", "),!1}})}return{initialize:function(e){a=(e=e||{}).template("sttr-shortcode-setting"),c=e.template("sttr-shortcode-attribute");var o=s("#shortcode-settings");s.each(savedShortcodes,function(e,t){r(o,e,t.content_encoding);var i=o.find(".shortcode-setting-container:last .shortcode-setting-attributes"),n=o.data("lastIndex");s.each(t.attributes,function(e,t){d(i,n,t.name,t.encoding)})}),s("#shortcodesSettingsForm .shortcode-add-setting").click(function(){r(o)})}}}(jQuery),Supertext.Settings.Workflow=function(t){"use strict";var i,n;function o(){i.val(n.val()),n.children("option:last").is(":selected")?i.removeProp("readonly"):i.prop("readonly",!0)}return{initialize:function(e){i=t("#sttr-api-url"),(n=t("#sttr-api-selection")).change(o),o()}}}(jQuery),jQuery(document).ready(function(){var e=window.location.search,e=/tab=(.*?)(&|$|\s)/.exec(e);switch(null===e?"users":e[1]){case"users":Supertext.Settings.Users.initialize();break;case"translatablefields":Supertext.Settings.TranslatableFields.initialize();break;case"shortcodes":Supertext.Settings.Shortcodes.initialize({template:wp.template});break;case"workflow":Supertext.Settings.Workflow.initialize()}});