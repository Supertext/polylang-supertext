/*!
 * Supertext translation
 * https://wordpress.org/plugins/polylang-supertext/
 * @author Heinrich Muralt
 * @version 2.7.0
 * Copyright 2020 */
var Supertext=Supertext||{};Supertext.Settings={},Supertext.Settings.Users=function(t){"use strict";var n,i;function o(){var e=i.clone();e.find(".remove-user-button").click(r),n.append(e)}function r(){t(this).parent("td").parent("tr").remove(),0===n.find("tr").length&&o()}return{initialize:function(e){(n=t("#tblStFields tbody")).find("tr .saved-user-id-hidden"),n.find("tr .remove-user-button").click(r),n.find("tr .saved-user-id-hidden").each(function(){var e=t(this);e.prev().val(e.val())}),(i=t("#tblStFields tr:last").clone()).find("input").val(""),t("#btnAddUser").click(o)}}}(jQuery),Supertext.Settings.TranslatableFields=function(n){"use strict";var i,t={initialize:function(e){i=n("#translatablefieldsSettingsForm .custom-field-input").last().clone(),n("#translatablefieldsSettingsForm .custom-field-remove-input").click(r),n("#translatablefieldsSettingsForm .custom-field-add-input").click(o)}};function o(){var e=n(this),t=i.clone();t.children(".custom-field-remove-input").click(r),t.insertBefore(e).show()}function r(){n(this).parent().remove()}var s,a,c=(s={},a={},{initialize:function(e){for(var t in savedFieldDefinitionIds)savedFieldDefinitionIds.hasOwnProperty(t)&&(s[t]=n("#fieldDefinitionsTree"+t),a[t]=n("#checkedFieldsInput"+t),s[t].jstree({core:{themes:{name:"wordpress-dark"}},plugins:["checkbox"],checkbox:{keep_selected_style:!1}}),s[t].jstree("select_node",savedFieldDefinitionIds[t]));n("#translatablefieldsSettingsForm").submit(d)}});function d(){n.each(s,function(e,t){var n=t.jstree("get_checked",!1);a[e].val(n.join(","))})}return{initialize:function(e){e=e||{},t.initialize(e),c.initialize(e)}}}(jQuery),Supertext.Settings.Shortcodes=function(a){"use strict";var c,d;function r(e,t,n){var i=e.data("lastIndex"),o=void 0===i?0:i+1,r=c({shortcodeIndex:o,name:t,contentEncoding:n}),s=a(r);e.append(s),e.data("lastIndex",o),s.children(".shortcode-remove-setting").click(function(){s.remove()}),s.find(".shortcode-attribute-add-input").click(function(){u(s.find(".shortcode-setting-attributes"),o)}),l(s),function(e){e.find(".shortcode-input-name").bind("keydown",function(e){e.keyCode===a.ui.keyCode.TAB&&a(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(a.ui.autocomplete.filter(registeredShortcodes,e.term))}})}(s)}function u(e,t,n,i){var o=e.data("lastIndex"),r=void 0===o?0:o+1,s=a(d({shortcodeIndex:t,attributeIndex:r,name:n,encoding:i}));e.append(s),e.data("lastIndex",r),s.children(".shortcode-attribute-remove-input").click(function(){s.remove()}),l(s)}function i(e){return e.split(/,\s*/)}function l(e){e.find(".shortcode-input-encoding").bind("keydown",function(e){e.keyCode===a.ui.keyCode.TAB&&a(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(a.ui.autocomplete.filter(availableEncodingFunctions,function(e){return i(e).pop()}(e.term)))},focus:function(){return!1},select:function(e,t){var n=i(this.value);return n.pop(),n.push(t.item.value),n.push(""),this.value=n.join(", "),!1}})}return{initialize:function(e){c=(e=e||{}).template("sttr-shortcode-setting"),d=e.template("sttr-shortcode-attribute");var o=a("#shortcode-settings");a.each(savedShortcodes,function(e,t){r(o,e,t.content_encoding);var n=o.find(".shortcode-setting-container:last .shortcode-setting-attributes"),i=o.data("lastIndex");a.each(t.attributes,function(e,t){u(n,i,t.name,t.encoding)})}),a("#shortcodesSettingsForm .shortcode-add-setting").click(function(){r(o)})}}}(jQuery),Supertext.Settings.Workflow=function(t){"use strict";var n,i;function o(){n.val(i.val()),i.children("option:last").is(":selected")?n.removeProp("readonly"):n.prop("readonly",!0)}return{initialize:function(e){n=t("#sttr-api-url"),(i=t("#sttr-api-selection")).change(o),o()}}}(jQuery),jQuery(document).ready(function(){var e=window.location.search,t=/tab=(.*?)(&|$|\s)/.exec(e);switch(null===t?"users":t[1]){case"users":Supertext.Settings.Users.initialize();break;case"translatablefields":Supertext.Settings.TranslatableFields.initialize();break;case"shortcodes":Supertext.Settings.Shortcodes.initialize({template:wp.template});break;case"workflow":Supertext.Settings.Workflow.initialize()}});