/*!
 * Supertext translation
 * https://wordpress.org/plugins/polylang-supertext/
 * @author Heinrich Muralt
 * @version 2.7.0
 * Copyright 2023 */
var Supertext=Supertext||{};Supertext.Settings={},Supertext.Settings.Users=function(t){"use strict";var n,i;function o(){var e=i.clone();e.find(".remove-user-button").click(r),n.append(e)}function r(){t(this).parent("td").parent("tr").remove(),0===n.find("tr").length&&o()}return{initialize:function(e){(n=t("#tblStFields tbody")).find("tr .saved-user-id-hidden"),n.find("tr .remove-user-button").click(r),n.find("tr .saved-user-id-hidden").each(function(){var e=t(this);e.prev().val(e.val())}),(i=t("#tblStFields tr:last").clone()).find("input").val(""),t("#btnAddUser").click(o)}}}(jQuery),Supertext.Settings.TranslatableFields=function(i){"use strict";o={};var o,t={initialize:function(e){i("#translatablefieldsSettingsForm .field-remove-input").click(r),i("#translatablefieldsSettingsForm .field-add-input").click(n),i("#translatablefieldsSettingsForm .settings-input-list").each(function(e,t){var t=i(t),n=t.children(".settings-input-element").last().clone(),t=t.children(".field-add-input").first().data("input-name");o[t]=n})}};function n(){var e=i(this),t=o[e.data("input-name")].clone();t.children(".field-remove-input").click(r),t.children(".custom-field-remove-input").click(r),t.insertBefore(e).show()}function r(){i(this).parent().remove()}s={},c={};var s,c,a={initialize:function(e){for(var t in savedFieldDefinitionIds)savedFieldDefinitionIds.hasOwnProperty(t)&&(s[t]=i("#fieldDefinitionsTree"+t),c[t]=i("#checkedFieldsInput"+t),s[t].jstree({core:{themes:{name:"wordpress-dark"}},plugins:["checkbox"],checkbox:{keep_selected_style:!1}}),s[t].jstree("select_node",savedFieldDefinitionIds[t]));i("#translatablefieldsSettingsForm").submit(d)}};function d(){i.each(s,function(e,t){t=t.jstree("get_checked",!1);c[e].val(t.join(","))})}return{initialize:function(e){t.initialize(e=e||{}),a.initialize(e)}}}(jQuery),Supertext.Settings.Shortcodes=function(c){"use strict";var a,s;function r(e,t,n,i){var o=e.data("lastIndex"),r=void 0===o?0:o+1,o=a({shortcodeIndex:r,name:t,contentEncoding:n,contentEncodingInverted:!!i}),s=c(o);e.append(s),e.data("lastIndex",r),s.children(".shortcode-remove-setting").click(function(){s.remove()}),s.find(".shortcode-attribute-add-input").click(function(){d(s.find(".shortcode-setting-attributes"),r)}),l(s),s.find(".shortcode-input-name").bind("keydown",function(e){e.keyCode===c.ui.keyCode.TAB&&c(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(c.ui.autocomplete.filter(registeredShortcodes,e.term))}})}function d(e,t,n,i){var o=e.data("lastIndex"),o=void 0===o?0:o+1,r=c(s({shortcodeIndex:t,attributeIndex:o,name:n,encoding:i}));e.append(r),e.data("lastIndex",o),r.children(".shortcode-attribute-remove-input").click(function(){r.remove()}),l(r)}function i(e){return e.split(/,\s*/)}function l(e){e.find(".shortcode-input-encoding").bind("keydown",function(e){e.keyCode===c.ui.keyCode.TAB&&c(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(e,t){t(c.ui.autocomplete.filter(availableEncodingFunctions,i(e.term).pop()))},focus:function(){return!1},select:function(e,t){var n=i(this.value);return n.pop(),n.push(t.item.value),n.push(""),this.value=n.join(", "),!1}})}return{initialize:function(e){a=(e=e||{}).template("sttr-shortcode-setting"),s=e.template("sttr-shortcode-attribute");var o=c("#shortcode-settings"),t=c("#disable-shortcode-replacement"),n=c("#shortcodesSettingsForm .shortcode-add-setting");c.each(savedShortcodes,function(e,t){r(o,e,t.content_encoding,t.content_encoding_inverted);var n=o.find(".shortcode-setting-container:last .shortcode-setting-attributes"),i=o.data("lastIndex");c.each(t.attributes,function(e,t){d(n,i,t.name,t.encoding)})}),n.click(function(){r(o)}),t.click(function(){t.prop("checked")?(o.hide(),n.hide()):(o.show(),n.show())}),t.prop("checked")&&(o.hide(),n.hide())}}}(jQuery),Supertext.Settings.Workflow=function(t){"use strict";var n,i;function o(){n.val(i.val()),i.children("option:last").is(":selected")?n.prop("readonly",!1):n.prop("readonly",!0)}return{initialize:function(e){n=t("#sttr-api-url"),(i=t("#sttr-api-selection")).change(o),o()}}}(jQuery),jQuery(document).ready(function(){var e=window.location.search,e=/tab=(.*?)(&|$|\s)/.exec(e);switch(null===e?"users":e[1]){case"users":Supertext.Settings.Users.initialize();break;case"translatablefields":Supertext.Settings.TranslatableFields.initialize();break;case"shortcodes":Supertext.Settings.Shortcodes.initialize({template:wp.template});break;case"workflow":Supertext.Settings.Workflow.initialize()}});